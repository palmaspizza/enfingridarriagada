<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enfermera Ingrid Arriagada Mu√±oz - Cuidado Profesional y Humanizado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="P1000020al2.JPG">
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <style>
        /* Paleta de Colores:
            - Fondo: #F7F7F9 (Blanco Roto)
            - Principal: #2C3E50 (Azul Marino Suave)
            - Acento 1: #1ABC9C (Turquesa/Verde Agua)
            - Acento 2: #E7C6FF (Lavanda Suave)
        */

        :root {
            --color-fondo: #F7F7F9;
            --color-principal: #2C3E50;
            --color-acento1: #1ABC9C;
            --color-acento2: #E7C6FF;
            --color-texto-claro: white;
            --color-topbar: #34495E; /* Azul m√°s oscuro */
        }

        /* Estilos Generales */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-fondo);
            color: var(--color-principal);
            line-height: 1.6;
            scroll-behavior: smooth;
        }
        #horariosDisponibles {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            max-height: 80%;
            overflow-y: auto;
            padding-right: 6px;
        }
        .bloqueHora {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-weight: 700;
            padding: 12px 10px;
            cursor: pointer;
            transition: transform .15s ease, box-shadow .15s ease, background-color .2s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }
        .bloqueHora:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 14px rgba(0,0,0,0.18);
        }
        .horaLibre {
            background-color: #26a269;
            color: #fff;
        }
        .horaOcupada {
            background-color: #e74c3c;
            color: #fff;
            cursor: default;
        }
        #botones-toggle-horas {
            max-height: 40vh;
            overflow-y: auto;
            padding-right: 6px;
        }
        .toggle-hora {
            border: none;
            border-radius: 10px;
            padding: 10px 12px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
            transition: transform .15s ease, box-shadow .15s ease, background-color .2s ease;
            background-color: #e74c3c;
            color: #fff;
        }
        .toggle-hora.activo {
            background-color: #26a269;
            color: #fff;
        }
        .toggle-hora:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 14px rgba(0,0,0,0.18);
        }

        h1, h2, h3 {
            color: var(--color-principal);
            text-align: center;
        }

        section {
            padding: 80px 5%;
            text-align: center;
        }
        
        /* ------------------------------------------- */
        /* CABECERA AVANZADA (HEADER DOBLE)            */
        /* ------------------------------------------- */

        .header-container {
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Top Bar */
        .topbar {
            background-color: var(--color-topbar); 
            color: var(--color-texto-claro);
            padding: 10px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
        }
        
        .topbar-info a {
            color: var(--color-texto-claro);
            text-decoration: none;
            margin-right: 20px;
            transition: color 0.3s;
        }

        .topbar-info a i {
            margin-right: 5px;
        }

        .cta-topbar {
            background-color: var(--color-acento1);
            color: var(--color-texto-claro);
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .cta-topbar:hover {
            background-color: #16A085;
        }


        /* Main Bar (Navegaci√≥n Formal) */
        .navbar {
            background-color: var(--color-texto-claro);
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--color-principal);
            text-decoration: none;
        }
        
        .logo span {
            color: var(--color-acento1);
        }

        .nav-links {
            display: flex; /* Por defecto visible en escritorio */
        }
        
        .nav-links a {
            color: var(--color-principal);
            text-decoration: none;
            margin-left: 30px;
            font-weight: 600;
            transition: color 0.3s;
            padding: 5px 0;
            border-bottom: 2px solid transparent;
        }

        .nav-links a:hover {
            color: var(--color-acento1);
            border-bottom: 2px solid var(--color-acento1);
        }
        
        /* Icono de men√∫ hamburguesa (oculto en escritorio) */
        .menu-toggle {
            display: none; 
            font-size: 1.5em;
            cursor: pointer;
            color: var(--color-principal);
        }
        
        /* ------------------------------------------- */
        /* SECCIONES Y CONTENIDO (se mantienen igual)  */
        /* ------------------------------------------- */

        /* Secci√≥n HERO */
        #inicio {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
        }

        .hero-img {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--color-acento2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        #inicio h1 {
            font-size: 2.8em;
            margin-bottom: 5px;
        }

        #inicio h2 {
            font-size: 1.5em;
            color: var(--color-acento1);
            font-weight: 400;
            margin-top: 0;
        }

        .cta-button {
            display: inline-block;
            background-color: var(--color-acento1);
            color: var(--color-texto-claro);
            padding: 15px 30px;
            text-decoration: none;
            border: none;
            cursor: pointer;
            border-radius: 50px;
            margin-top: 25px;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.3s;
        }

        .cta-button:hover {
            background-color: #16A085;
            transform: translateY(-2px);
        }
        .cta-button:disabled {
            background-color: #b5b5b5;
            color: #666;
            cursor: not-allowed;
            transform: none;
            opacity: 0.85;
        }

        /* Secci√≥n Qui√©n Soy (Credenciales) */
        #quien-soy { background-color: white; }
        .credenciales {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .credencial-item {
            text-align: center;
            padding: 15px 25px;
            border-radius: 10px;
            background-color: var(--color-fondo);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            font-weight: bold;
            color: var(--color-principal);
        }
        .credencial-item:nth-child(1) { color: var(--color-acento1); } 
        .credencial-item:nth-child(3) { background-color: var(--color-acento2); color: var(--color-principal); } 

        /* Secci√≥n Servicios */
        #servicios { background-color: var(--color-fondo); }
        .servicios-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        .servicio-card {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
            text-align: left;
            border-top: 5px solid var(--color-acento1);
        }
        .servicio-card:hover { transform: translateY(-5px); }
        .servicio-card i {
            font-size: 2.5em;
            color: var(--color-acento1);
            margin-bottom: 15px;
        }
        
        /* Secci√≥n Testimonios */
        #testimonios { background-color: var(--color-acento2); color: var(--color-principal); }
        .testimonial-container {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        .testimonial {
            background-color: var(--color-texto-claro);
            padding: 25px;
            border-radius: 10px;
            font-style: italic;
            text-align: left;
            border-left: 5px solid var(--color-acento1);
        }

        /* Secci√≥n Contacto */
        #contacto { background-color: white; padding-bottom: 40px; }
        .contact-content {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        .contact-form, .contact-info {
            flex: 1;
            min-width: 300px;
            max-width: 450px;
            text-align: left;
        }
        .contact-form input, .contact-form textarea {
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            background-color: var(--color-fondo);
        }
        .contact-info i {
            color: var(--color-acento1);
            margin-right: 10px;
        }
        .contact-info a {
            color: var(--color-principal); 
            text-decoration: none;
            transition: color 0.3s;
        }

        /* Pie de P√°gina */
        footer {
            background-color: var(--color-principal);
            color: var(--color-texto-claro);
            text-align: center;
            padding: 25px 5%;
            font-size: 0.9em;
        }
        .social-icons a {
            color: var(--color-texto-claro);
            font-size: 1.5em;
            margin: 0 10px;
            transition: color 0.3s;
        }

        /* ================================================= */
        /* MEDIA QUERIES (EST√âTICA Y MEN√ö EN M√ìVILES)      */
        /* ================================================= */
        @media (max-width: 768px) {
            
            section {
                padding: 40px 5%; 
            }
            
            /* Top Bar M√≥vil */
            .topbar {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px;
            }
            .topbar-info {
                display: flex;
                flex-direction: column;
                margin-bottom: 10px;
                gap: 5px;
                width: 100%;
            }
            .cta-topbar {
                width: 100%; 
                text-align: center;
            }

            /* Navegaci√≥n Principal M√≥vil */
            .menu-toggle {
                display: block; /* Muestra el icono de hamburguesa */
            }
            .nav-links {
                /* OCULTAR MEN√ö por defecto en m√≥viles */
                display: none; 
                flex-direction: column;
                position: absolute;
                top: 100%; /* Debajo de la navbar */
                left: 0;
                width: 100%;
                background-color: var(--color-texto-claro);
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
                padding: 10px 0;
            }
            
            /* Estado activo del men√∫ (clase a√±adida por JS) */
            .nav-links.active {
                display: flex;
            }
            
            .nav-links a {
                margin: 0;
                padding: 10px 20px;
                width: 100%;
                border-bottom: none;
                text-align: left;
            }

            /* HERO */
            #inicio h1 { font-size: 1.8em; }
            #inicio h2 { font-size: 1.1em; padding: 0 10px; }

            /* Credenciales y Contacto */
            .credenciales { flex-direction: column; }
            .credencial-item { width: 90%; margin: 0 auto; }
            .contact-content { flex-direction: column; align-items: center; }
            .contact-form, .contact-info { width: 100%; max-width: 90%; text-align: center; }
            .contact-form { order: 2; }
            .contact-info { order: 1; }
            
            /* Ajustes Calendario M√≥vil */
            .diaCalendario { padding: 5px; font-size: 0.9em; }
            .dias-semana div { font-size: 0.8em; padding: 4px 0; }
        }
        .modalAgenda {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        .modalAgenda.activa { display: block; }
        .contenidoModalAgenda {
            background-color: #fff;
            color: var(--color-principal);
            margin: 2% auto;
            padding: 15px;
            width: 95%;
            max-width: 600px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            height: auto;
            border: 1px solid #000;
        }
        .cerrarModalAgenda {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }
        #cuadroCalendario {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 15px;
        }
        .diaCalendario {
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: 700;
            cursor: pointer;
            background: var(--color-fondo);
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            aspect-ratio: 1 / 1;
            min-height: 38px;
        }
        .diaLibre { background: green; color: #fff;border: 1px solid #000;}
.diaPasado{
    background-color: #fff !important;
    color: #fff !important;
}
        .diaOcupado {border: 1px solid #000; background: red; color: #fff !important;}
        .diaBloqueado {border: 1px solid #000; background: red; color: #fff !important;}
        .dias-semana {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 12px;
            color: var(--color-principal);
            font-weight: 700;
        }
        .dias-semana div {
            padding: 6px 0;
            border-radius: 6px;
            background: var(--color-fondo);
            border: 1px solid #ddd;
            text-align: center;
        }
        .modalBarberia {
            display: none;
            position: fixed;
            z-index: 1002;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
        }
        .contenidoModal {
            background-color: #fff;
            color: var(--color-principal);
            margin: 2% auto;
            padding: 20px;
            width: 95%;
            height: auto;
            max-height: 90vh;
            overflow-y: auto;
            max-width: 600px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            border: 1px solid #000;
        }
        .contenidoModalAgenda, .contenidoModal {
            font-size: 1.05em;
            line-height: 1.5;
        }
        .contenidoModalAgenda .cta-button,
        .contenidoModal .cta-button {
            padding: 12px 16px;
            font-size: 1rem;
        }
        /* Ajustes de accesibilidad y est√©tica general */
        .cta-button {
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }
        .cta-button:active {
            transform: translateY(0);
        }
        .leyenda-calendario {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 8px 0 6px;
            flex-wrap: wrap;
        }
        .leyenda-calendario .leyenda {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.95em;
        }
        .leyenda-verde::before,
        .leyenda-rojo::before,
        .leyenda-gris::before {
            content: "";
            width: 14px;
            height: 14px;
            border: 1px solid #000;
            border-radius: 4px;
            display: inline-block;
        }
        .leyenda-verde::before { background: green; }
        .leyenda-rojo::before { background: red; }
        .leyenda-gris::before { background: #ccc; }

        /* Ajustes finos para m√≥viles muy peque√±os */
        @media (max-width: 420px) {
            #horariosDisponibles {
                grid-template-columns: 1fr;
            }
            #cuadroCalendario {
                gap: 6px;
            }
            .diaCalendario {
                padding: 6px;
                font-size: 0.9em;
                min-height: 34px;
            }
            .contenidoModalAgenda {
                width: 96%;
                padding: 12px;
            }
        }
        .cerrarModal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }
        .bloqueHora {
            padding: 14px;
            border-radius: 8px;
            margin: 8px 0;
            font-weight: 700;
            cursor: pointer;
            text-align: center;
            border: 2px solid #000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
            min-height: 48px;
            font-size: 1.05em;
        }


        .horaLibre { background: var(--color-acento1); color: var(--color-texto-claro); }
        .horaOcupada { background: #ff4d4d; color: var(--color-texto-claro); border-color: #b30000; }
        .contenidoModal input {
            width: 100%;
            margin: 6px 0;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08) inset;
            color: var(--color-principal);
            background: var(--color-fondo);
        }
        .contenidoModal .cta-button,
        .contenidoModalAgenda .cta-button {
            border: 1px solid #000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }
        #modal-hora-personalizada .contenidoModal {
            background: linear-gradient(180deg, #ffffff, #f7f7f9);
            border: 1px solid #000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.18);
            max-width: 720px;
            font-size: 1.1em;
            line-height: 1.6;
        }
        @keyframes breathe {
            0% { transform: scale(1); }
            50% { transform: scale(1.015); }
            100% { transform: scale(1); }
        }
        .cta-button { animation: breathe 6s ease-in-out infinite; }
        .horaLibre, .diaLibre { animation: breathe 8s ease-in-out infinite; }
        .toggle-hora.activo { animation: breathe 7s ease-in-out infinite; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeOverlay {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes appearScale {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }
        .modalAgenda.activa { animation: fadeOverlay 200ms ease; }
        .modalAgenda.activa .contenidoModalAgenda { animation: fadeInUp 280ms ease both; }
        .modalBarberia { animation: fadeOverlay 200ms ease; }
        .modalBarberia .contenidoModal { animation: fadeInUp 280ms ease both; }
        .diaCalendario { transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease; }
        .diaCalendario:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 6px 14px rgba(0,0,0,0.18); }
        .bloqueHora { transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease; }
        .toggle-hora { transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease; }
        .reserva-item { animation: appearScale 250ms ease both; }
        #modal-hora-personalizada input {
            width: 100%;
            font-size: 1.1em;
            padding: 14px;
        }
        #modal-hora-personalizada .cta-button {
            padding: 14px 18px;
            font-size: 1.05em;
        }
        #reservar-button {
            display: block;
            width: 100%;
            padding: 16px 20px !important;
            font-size: 1.1em;
        }
        .grupo-campo {
            margin: 12px 0;
        }
    </style>
</head>
<body>

    <header class="header-container">
        
        <div class="topbar">
    <div class="topbar-info">
        <!-- Tel√©fono en formato internacional -->
        <a href="tel:+56930273353">
            <i class="fas fa-phone-alt"></i> Ll√°manos: +56 9 3027 3353
        </a>
        
        <!-- Correo electr√≥nico -->
        <a href="mailto:ingridcarola1973@gmail.com">
            <i class="fas fa-envelope"></i> ingridcarola1973@gmail.com
        </a>
    </div>
    
    <!-- WhatsApp con n√∫mero en formato internacional sin espacios ni signos -->
    <a target="_blank" class="cta-topbar" id="btn-whatsapp">
        <i class="fab fa-whatsapp"></i> Agenda tu Cita V√≠a WhatsApp
    </a>
</div>
        
        <nav class="navbar">
            <a href="#inicio" class="logo">
                <i class="fas fa-user-nurse" style="color: var(--color-acento1);"></i> Enf. <span>Ingrid</span> Arriagada
            </a>
            
            <div class="nav-links" id="menu-links">
                <a href="#quien-soy">Qui√©n Soy</a>
                <a href="#servicios">Servicios</a>
                <a href="#testimonios">Opiniones</a>
                <a href="#contacto">Contacto</a>
              
            </div>
            
            <div class="menu-toggle" id="menu-toggle"><i class="fas fa-bars"></i></div>
        </nav>
    </header>

    <section id="inicio">
        <div class="hero-content">
            <img src="P1000020al2.JPG" alt="Foto de la Enfermera Ingrid Arriagada Mu√±oz" class="hero-img">
            <h1>ENFERMERA <br>INGRID ARRIAGADA MU√ëOZ</h1>
            <h2>Tu Cuidado y Bienestar</h2>
            <a href="#contacto" class="cta-button" id="btn-agendar-hero">Agendar Hora</a>
        </div>
    </section>
    
 
<section id="servicios">
  <h2>
    <i class="fas fa-hand-holding-medical" style="color: var(--color-acento1);"></i>
    Servicios de Enfermer√≠a Domiciliaria e Integral
  </h2>

  <div class="servicios-grid">
    
    <!-- Tratamiento de heridas -->
    <div class="servicio-card">
      <i class="fas fa-band-aid servicio-icon"></i>
      <h3>Tratamiento de Heridas</h3>
      <p>
        Manejo especializado de pie diab√©tico, √∫lceras venosas, √∫lceras por presi√≥n y quemaduras,
        aplicando protocolos seguros para favorecer la recuperaci√≥n y prevenir complicaciones.
      </p>
    </div>

    <!-- Procedimientos menores -->
    <div class="servicio-card">
      <i class="fas fa-cut servicio-icon"></i>
      <h3>Procedimientos Menores</h3>
      <p>
        Retiro de puntos de sutura realizado con t√©cnicas seguras y cuidadosas para garantizar
        una correcta cicatrizaci√≥n.
      </p>
    </div>

    <!-- Manejo de dispositivos m√©dicos -->
    <div class="servicio-card">
      <i class="fas fa-stethoscope servicio-icon"></i>
      <h3>Manejo de Dispositivos M√©dicos</h3>
      <ul>
        <li>Cambio de sonda</li>
        <li>Instalaci√≥n de VVP (V√≠a Venosa Permeable)</li>
      </ul>
    </div>

    <!-- Administraci√≥n de medicamentos -->
    <div class="servicio-card">
      <i class="fas fa-pills servicio-icon"></i>
      <h3>Administraci√≥n de Medicamentos</h3>
      <p>
        Aplicaci√≥n de tratamientos farmacol√≥gicos seg√∫n indicaci√≥n m√©dica, asegurando la correcta
        dosificaci√≥n y supervisi√≥n.
      </p>
    </div>

    <!-- Control de signos vitales -->
    <div class="servicio-card">
      <i class="fas fa-heartbeat servicio-icon"></i>
      <h3>Control de Signos Vitales</h3>
      <p>
        Monitoreo peri√≥dico de presi√≥n arterial, frecuencia card√≠aca, temperatura y otros par√°metros
        esenciales para evaluar el estado de salud del paciente.
      </p>
    </div>

  </div>
</section>
<style>
    #servicios {
  padding: 2rem;
  background: #f9f9f9;
}

.servicios-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.servicio-card {
  background: #fff;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  transition: transform 0.2s ease;
}

.servicio-card:hover {
  transform: translateY(-5px);
}

.servicio-icon {
  font-size: 2rem;
  color: var(--color-acento1);
  margin-bottom: 0.5rem;
}
</style>
    <section hidden id="testimonios">
        <h2><i class="fas fa-quote-left" style="color: var(--color-principal);"></i> La Confianza de Mis Pacientes</h2>
        <div class="testimonial-container">
            <blockquote class="testimonial">
                <p>"**[TESTIMONIO 1: Frase poderosa sobre la calidad de su cuidado o empat√≠a.]** Su profesionalismo es impecable." </p>
                <footer>‚Äì **[Nombre del Paciente/Familiar]**, [Ciudad/Comuna].</footer>
            </blockquote>
            
            <blockquote class="testimonial">
                <p>"**[TESTIMONIO 2: Frase enfocada en su profesionalismo y resultados.]** Es un alivio saber que mi familiar est√° en manos tan competentes y amables."</p>
                <footer>‚Äì **[Nombre del Paciente/Familiar]**, [Ciudad/Comuna].</footer>
            </blockquote>
            
            <blockquote class="testimonial">
                <p>"**[TESTIMONIO 3: Frase sobre la tranquilidad que genera su presencia.]** Su trato es siempre cercano y su experiencia se nota en cada detalle."</p>
                <footer>‚Äì **[Nombre del Paciente/Familiar]**, [Ciudad/Comuna].</footer>
            </blockquote>
        </div>
    </section>

    <section id="contacto">
        <h2><i class="fas fa-phone-alt" style="color: var(--color-acento1);"></i> Agenda tu Cuidado</h2>
        <p style="font-size: 1.2em;">Comun√≠cate directamente para solicitar una visita o asesor√≠a.</p>
        
   <div class="contact-content">
    <a href="#contacto" class="cta-button" id="btn-agendar-contacto">Agenda tu Hora Ahora</a>
    <div class="contact-info">
        <h3>Datos de Contacto</h3>
        <p><i class="fas fa-phone"></i> <strong>Tel√©fono:</strong> <a href="tel:+56930273353">+56 9 3027 3353</a></p>
        <p><i class="fas fa-envelope"></i> <strong>Email:</strong> <a href="mailto:ingridcarola1973@gmail.com">ingridcarola1973@gmail.com</a></p>
        <p><i class="fas fa-map-marker-alt"></i> <strong>√Årea de Cobertura:</strong> Las Condes, Santiago</p>
    </div>
</div>
    </section>
    <div id="modal-calendario" class="modalAgenda">
        <div class="contenidoModalAgenda">
            <span class="cerrarModalAgenda" id="cerrar-modal-calendario">&times;</span>
            <div style="display:flex;align-items:center;gap:12px;justify-content:center">
            <button id="btn-panel" class="cta-button" style="padding:8px 8px">‚öôÔ∏è</button>    
                <h1 id="tituloMes" style="margin:0"></h1>
               <br>
              
            </div>
            <h2 style="margin:8px 0">Selecciona un d√≠a disponible (verde)</h2>
            <br>  <button id="mesAnterior" class="cta-button" style="padding:8px 12px; background-color: #34495E;">‚Üê Mes Anterior</button>        <button id="mesSiguiente" class="cta-button" style="padding:8px 12px">Mes Siguiente‚Üí</button>  <button id="desactivar-bloqueo" class="cta-button"  style="background-color: red; padding:8px 12px; display: none;" onclick="document.getElementById('desactivar-bloqueo').style.display = 'none';" >Desactivar bloqueo</button>
            <div class="dias-semana">
                <div>Lun</div>
                <div>Mar</div>
                <div>Mi√©</div>
                <div>Jue</div>
                <div>Vie</div>
                <div>S√°b</div>
                <div>Dom</div>
            </div>
            <div class="leyenda-calendario">
                <span class="leyenda leyenda-verde">Verde: Disponible</span>
                <span class="leyenda leyenda-rojo">Rojo: Ocupado/Cerrado</span>
               
            </div>
            <div id="cuadroCalendario"></div>
 </div>
    </div>
    <div id="modal-horarios" class="modalBarberia">
        <div class="contenidoModal">
            <span id="cerrarVentana" style="border: 1px solid #000; padding: 8px; border-radius: 20%; background-color: red; color: #fff;"  class="cerrarModal">Cerrar</span>
         <br>   <h3 id="tituloVentana"></h3>
            <h3>Selecciona la hora</h3>
            <div class="leyenda-calendario" style="margin-bottom:8px">
                <span class="leyenda leyenda-verde">Libre ‚úÖ</span>
                <span class="leyenda leyenda-rojo">Ocupada ‚õî</span>
            </div>
            <p style="text-align:center;margin:8px 0">Toca una hora verde para confirmar.</p>
            <div id="horariosDisponibles"></div>
        </div>
    </div>
  
    <form action="">
       <div id="modal-hora-personalizada" class="modalBarberia">
    <div class="contenidoModal">
        <h3 style="text-align:center;margin-top:0">Confirmar tu reserva</h3>
        
        <div class="grupo-campo">
            <label for="fecha">D√≠a</label>
            <input disabled type="date" id="fecha" required>
            <div style="display:flex;justify-content:flex-end;margin-top:8px">
                <button type="button" id="cambiar-dia-btn" class="cta-button">Cambiar D√≠a</button>
            </div>
        </div>

        <div class="grupo-campo">
            <label for="hora">Hora</label>
            <input type="text" id="hora" disabled>
            <div style="display:flex;justify-content:flex-end;margin-top:8px">
                <button id="cambiar-hora-btn" class="cta-button">Cambiar Hora</button>
            </div>
        </div>

        <div class="grupo-campo">
            <label for="nombre">Nombre</label>
            <input type="text" placeholder="Escribe tu nombre" id="nombre">
        </div>

        <div class="grupo-campo">
            <label for="apellido">Apellido</label>
            <input type="text" placeholder="Escribe tu apellido" id="apellido">
        </div>

        <button id="reservar-button" style="background-color: green !important;" type="button" class="cta-button">Agendar</button>
        <p style="text-align:center;margin:10px 0 0">Se te redireccionar√° a <span style="color: green;">WhatsApp</span></p>
    </div>
</div>
<script>
    document.getElementById("cambiar-dia-btn").addEventListener("click", function() {
   document.getElementById('modal-calendario').style.display = 'block'; 
   document.getElementById('modal-hora-personalizada').style.display = 'none';
        const fechaInput = document.getElementById("fecha");
    fechaInput.disabled = false; // habilita el input
    fechaInput.focus();          // pone el cursor ah√≠modal-hora-personalizada
});

document.getElementById("cambiar-hora-btn").addEventListener("click", function(e) {
 document.getElementById("modal-hora-personalizada").style.display = 'none';   e.preventDefault();
    // El handler se define m√°s abajo de forma centralizada
});

// Deshabilitar "Agendar" si no hay nombre
const reservarBtn = document.getElementById("reservar-button");
const nombreInput = document.getElementById("nombre");
if (reservarBtn && nombreInput) {
    reservarBtn.disabled = !nombreInput.value.trim();
    nombreInput.addEventListener("input", function() {
        reservarBtn.disabled = this.value.trim().length === 0;
    });
}
</script>
    </form>
    <div id="modal-reservada" class="modalBarberia">
        <div class="contenidoModal">
            <h3>HORA DISPONIBLE</h3>
        </div>
    </div>
    <div id="modal-acceso" class="modalBarberia" style="display:none">
        <div class="contenidoModal">
            <span class="cerrarModal" id="cerrar-modal-acceso">&times;</span>
            <h3>Acceso</h3>
            <input type="password" id="clave-input" maxlength="4" placeholder="clave">
            <button id="btn-entrar" class="cta-button">Entrar</button>
     <button id="btn-salir" class="cta-button" onclick="document.getElementById('modal-acceso').style.display = 'none';" style="background-color: red; color: #fff;" >Salir</button>    </div>
    </div>
    <div id="modal-control" class="modalBarberia" style="display:none">
        <div class="contenidoModal">
            <span class="cerrarModal" id="cerrar-modal-control">&times;</span>
            <h3>Panel de Control</h3>
            <button id="activar-bloqueo" type="button"  class="cta-button" style="padding:8px 12px">Marcar d√≠as cerrados 1x1</button>
            
            <div id="controles-semanales" style="margin: 15px 0; border-top: 1px solid #ccc; padding-top: 15px;">
                <h4 style="text-align: center; margin-bottom: 10px;">Gesti√≥n Semanal (Toque para cerrar/abrir)</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <button id="btn-toggle-1" class="cta-button" style="width:100%; padding: 15px;">Lunes</button>
                    <button id="btn-toggle-2" class="cta-button" style="width:100%; padding: 15px;">Martes</button>
                    <button id="btn-toggle-3" class="cta-button" style="width:100%; padding: 15px;">Mi√©rcoles</button>
                    <button id="btn-toggle-4" class="cta-button" style="width:100%; padding: 15px;">Jueves</button>
                    <button id="btn-toggle-5" class="cta-button" style="width:100%; padding: 15px;">Viernes</button>
                    <button id="btn-toggle-6" class="cta-button" style="width:100%; padding: 15px;">S√°bado</button>
                    <button id="btn-toggle-0" class="cta-button" style="width:100%; padding: 15px; grid-column: span 2;">Domingo</button>
                </div>
            </div>

            <button id="activar-horarios" class="cta-button" style="padding:8px 12px">Configurar horarios personalizados</button>
            <button id="borrar-todas" class="cta-button" style="padding:8px 12px">Borrar TODAS las reservas</button>
            <button id="cerrar-panel" class="cta-button" style="padding:8px 12px">Cerrar Panel</button>  ______________  <div id="listaReservas"></div>
        </div>
    </div>
    <div id="modal-configuracion-horarios" class="modalBarberia" style="display:none">
        <div class="contenidoModal">
            <span class="cerrarModal" id="cerrar-modal-config">&times;</span>
            <h3 id="titulo-config-horarios">Configurar Horario</h3>
            <p id="fecha-config-horarios"></p>
            <div style="display:flex;gap:8px;justify-content:center;margin-bottom:10px;">
                <button id="boton-horario-semana" class="cta-button">Horario de Semana</button>
                <button id="boton-horario-sabado" class="cta-button">Horario de S√°bado</button>
                <button id="boton-horario-cerrado" class="cta-button">D√≠a Cerrado</button>
            </div>
            <div id="botones-toggle-horas" style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;"></div>
            <button id="guardar-horario" class="cta-button">Guardar</button>
        </div>
    </div>



    <footer>
        <div class="social-icons">
            <a href="#" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="https://wa.me/56930273353" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
        </div>
        <p style="margin-top: 10px;">&copy; 2026 Enfermera Ingrid Arriagada Mu√±oz. Todos los derechos reservados.</p>
    </footer>

    <script>
        document.getElementById('menu-toggle').onclick = function() {
            var navLinks = document.getElementById('menu-links');
            // Toggle de la clase 'active' para mostrar/ocultar el men√∫
            navLinks.classList.toggle('active');
        };

        // Opcional: Cerrar men√∫ al hacer clic en un enlace (para m√≥viles)
        var links = document.querySelectorAll('.nav-links a');
        for (var i = 0; i < links.length; i++) {
            links[i].addEventListener('click', function() {
                document.getElementById('menu-links').classList.remove('active');
            });
        }
    </script>
    <script>
const firebaseConfig = {
  apiKey: "AIzaSyBSseZN21-xYc7uX7kekP0kb79xdWpWqds",
  authDomain: "enfingridarriagada.firebaseapp.com",
  databaseURL: "https://enfingridarriagada-default-rtdb.firebaseio.com",
  projectId: "enfingridarriagada",
  storageBucket: "enfingridarriagada.firebasestorage.app",
  messagingSenderId: "866351461780",
  appId: "1:866351461780:web:51651096722ec030b28b81",
  measurementId: "G-R5YXJP3BBH"
};
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const reservasRef = db.ref("reservas");
        const horariosRef = db.ref("horarios");
        const diasBloqueadosRef = db.ref("diasBloqueados");
        const diasSemanaBloqueadosRef = db.ref("diasSemanaBloqueados");
        if (firebase.auth) {
            firebase.auth().signInAnonymously().catch(err => {
                console.error("Error de autenticaci√≥n an√≥nima:", err?.message || err);
            });
        }

        const fechaInput = document.getElementById("fecha");
        const cuadroCalendario = document.getElementById("cuadroCalendario");
        const ventanaHorarios = document.getElementById("modal-horarios");
        const cerrarVentana = document.getElementById("cerrarVentana");
        const tituloVentana = document.getElementById("tituloVentana");
        const horariosDisponibles = document.getElementById("horariosDisponibles");
        const tituloMes = document.getElementById("tituloMes");
        const botonAnterior = document.getElementById("mesAnterior");
        const botonSiguiente = document.getElementById("mesSiguiente");
        const btnPanel = document.getElementById("btn-panel");
        const modalAcceso = document.getElementById("modal-acceso");
        const modalControl = document.getElementById("modal-control");
        const modalConfigHorarios = document.getElementById("modal-configuracion-horarios");
        const tituloConfigHorarios = document.getElementById("titulo-config-horarios");
        const fechaConfigHorarios = document.getElementById("fecha-config-horarios");
        const botonesToggleHoras = document.getElementById("botones-toggle-horas");

        let diasBloqueados = [];
        let diasSemanaBloqueados = [];
        let horariosPersonalizados = {};
        let reservasPorDia = {};
        let fechaActualCalendario = new Date();
        let modoBloqueoDias = false;
        let modoGestionHorarios = false;
        let fechaSeleccionadaParaConfigurar = "";

        const mesesTexto = [
            "Enero","Febrero","Marzo","Abril","Mayo","Junio",
            "Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"
        ];

        reservasRef.on("value", snapshot => {
            reservasPorDia = {};
            snapshot.forEach(child => {
                const r = child.val();
                if (!r || !r.fecha || !r.hora) return;
                if (!reservasPorDia[r.fecha]) reservasPorDia[r.fecha] = [];
                reservasPorDia[r.fecha].push(r.hora);
            });
            actualizarBarraMes();
        });
        function appendReservaToList({fecha, hora, nombre, apellido, key}) {
            const cont = document.getElementById("listaReservas");
            if (!cont) return;
            const idBloque = `${fecha}-${hora}`;
            if (document.getElementById(idBloque)) return;
            const div = document.createElement("div");
            div.className = "reserva-item";
            div.id = idBloque;
            div.dataset.order = new Date(`${fecha}T${hora}:00`).getTime();
            const texto = document.createElement("span");
            const nombreCompleto = [nombre, apellido].filter(Boolean).join(" ");
            texto.textContent = `üìÖ ${fecha} ‚è∞ ${hora} - ${nombreCompleto}`;
            const botonX = document.createElement("span");
            botonX.textContent = " | ‚ùå";
            botonX.className = "boton-x";
            botonX.title = "Eliminar esta hora";
            botonX.onclick = () => { reservasRef.child(key).remove(); div.remove(); };
            div.appendChild(texto);
            div.appendChild(botonX);
            let insertado = false;
            const hijos = Array.from(cont.children);
            for (let i = 0; i < hijos.length; i++) {
                const h = hijos[i];
                const hOrder = parseInt(h.dataset.order || "0", 10);
                if (parseInt(div.dataset.order, 10) < hOrder) {
                    cont.insertBefore(div, h);
                    insertado = true;
                    break;
                }
            }
            if (!insertado) cont.appendChild(div);
        }
        reservasRef.on("child_added", snap => {
            const v = snap.val();
            appendReservaToList({fecha: v.fecha, hora: v.hora, nombre: v.nombre, apellido: v.apellido, key: snap.key});
        });
        diasBloqueadosRef.on("value", snapshot => {
            diasBloqueados = [];
            snapshot.forEach(child => {
                const v = child.val();
                if (v && v.fecha) diasBloqueados.push(v.fecha);
            });
            actualizarBarraMes();
        });
        
        diasSemanaBloqueadosRef.on("value", snapshot => {
            diasSemanaBloqueados = snapshot.val() || [];
            actualizarBarraMes();
            actualizarBotonesSemana();
        });

        const diasSemanaNombres = ["Domingo", "Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado"];
        function actualizarBotonesSemana() {
            for (let i = 0; i <= 6; i++) {
                const btn = document.getElementById(`btn-toggle-${i}`);
                if (!btn) continue;
                const bloqueado = diasSemanaBloqueados.includes(i);
                const nombreDia = diasSemanaNombres[i];
                
                if (bloqueado) {
                    btn.innerHTML = `${nombreDia} <br>‚õî CERRADO`;
                    btn.style.backgroundColor = "#c0392b"; // Rojo
                } else {
                    btn.innerHTML = `${nombreDia} <br>‚úÖ ABIERTO`;
                    btn.style.backgroundColor = "#27ae60"; // Verde
                }
                // Asignar el evento onclick una sola vez o reasignarlo es seguro aqu√≠
                btn.onclick = () => toggleDiaSemana(i);
            }
        }

        function toggleDiaSemana(diaIndex) {
            const index = diasSemanaBloqueados.indexOf(diaIndex);
            let nuevos = [...diasSemanaBloqueados];
            if (index > -1) {
                nuevos.splice(index, 1);
            } else {
                nuevos.push(diaIndex);
            }
            diasSemanaBloqueadosRef.set(nuevos);
        }
        horariosRef.on("value", snapshot => {
            horariosPersonalizados = snapshot.val() || {};
            actualizarBarraMes();
        });

        function obtenerHorarioDelDiaDesdeFecha(fechaStr) {
            if (horariosPersonalizados[fechaStr]) return horariosPersonalizados[fechaStr];
            // Parse manual para evitar desfase de zona horaria (UTC vs Local)
            const [y, m, d] = fechaStr.split("-").map(Number);
            const dateObj = new Date(y, m - 1, d);
            const day = dateObj.getDay();
            
            const horas = [];
            function pushRange(start,end){ for(let h=start; h<=end; h++) horas.push(String(h).padStart(2,"0")+":00"); }
            // if (day === 0) return horas; // domingo cerrado (ahora controlado por panel)
            if (day === 6) { pushRange(9,14); return horas; } // s√°bado
            pushRange(9,18); // lunes-viernes y domingo
            return horas;
        }

        function generarCuadroCalendario() {
            const mesStr = `${fechaActualCalendario.getFullYear()}-${String(fechaActualCalendario.getMonth()+1).padStart(2,"0")}`;
            cuadroCalendario.innerHTML = "";
            const [anio, mes] = mesStr.split("-");
            const fechaInicio = new Date(anio, mes-1, 1);
            const primerDiaSemana = fechaInicio.getDay();
            const totalDias = new Date(anio, mes, 0).getDate();
            const offset = primerDiaSemana === 0 ? 6 : primerDiaSemana - 1;
            const hoy = new Date(); hoy.setHours(0,0,0,0);
            for (let i=0;i<offset;i++) cuadroCalendario.appendChild(document.createElement("div"));
            for (let dia=1; dia<=totalDias; dia++) {
                const fechaActual = `${anio}-${String(mes).padStart(2,"0")}-${String(dia).padStart(2,"0")}`;
                const celda = document.createElement("div");
                celda.classList.add("diaCalendario");
                celda.textContent = dia;
                const horasReservadas = reservasPorDia[fechaActual] || [];
                const horarioDelDia = obtenerHorarioDelDiaDesdeFecha(fechaActual);
                const fechaCelda = new Date(anio, mes-1, dia);
                const diaPasado = fechaCelda < hoy;
                const diaSemana = fechaCelda.getDay(); // 0=Domingo, 1=Lunes, etc.
                const estaBloqueado = diasBloqueados.includes(fechaActual) || 
                                      (diasSemanaBloqueados && diasSemanaBloqueados.includes(diaSemana)) ||
                                      horarioDelDia.length === 0;
                const estaOcupado = horasReservadas.length >= horarioDelDia.length;
                if (diaPasado) celda.classList.add("diaPasado");
                else if (estaBloqueado) celda.classList.add("diaBloqueado");
                else if (estaOcupado) celda.classList.add("diaOcupado");
                else celda.classList.add("diaLibre");
                if (diaPasado || (!modoBloqueoDias && estaBloqueado)) celda.style.pointerEvents = "none";
                celda.onclick = () => {
                    if (diaPasado) return;
                    if (modoGestionHorarios) {
                        fechaSeleccionadaParaConfigurar = fechaActual;
                        abrirVentanaConfiguracionHorarios();
                    } else if (modoBloqueoDias) {
                        if (estaBloqueado) {
                            diasBloqueadosRef.once("value", snapshot => {
                                snapshot.forEach(child => {
                                    if (child.val().fecha === fechaActual) child.ref.remove();
                                });
                            });
                        } else {
                            diasBloqueadosRef.push({ fecha: fechaActual });
                        }
                        actualizarBarraMes();
                    } else {
                        if (estaBloqueado) return;
                        fechaInput.value = fechaActual;
                        abrirVentanaHorarios(fechaActual);
                        cerrarCalendarioModal();
                    }
                };
                cuadroCalendario.appendChild(celda);
            }
        }
        function actualizarBarraMes() {
            const mes = fechaActualCalendario.getMonth();
            const a√±o = fechaActualCalendario.getFullYear();
            tituloMes.textContent = `${mesesTexto[mes]} ${a√±o}`;
            generarCuadroCalendario();
        }
        botonAnterior.onclick = () => { fechaActualCalendario.setMonth(fechaActualCalendario.getMonth()-1); actualizarBarraMes(); };
        botonSiguiente.onclick = () => { fechaActualCalendario.setMonth(fechaActualCalendario.getMonth()+1); actualizarBarraMes(); };

        function abrirVentanaHorarios(fecha) {
            tituloVentana.textContent = `HORAS DISPONIBLES ${fecha}`;
            horariosDisponibles.innerHTML = "";
            const horasReservadas = reservasPorDia[fecha] || [];
            const horarioDelDia = obtenerHorarioDelDiaDesdeFecha(fecha);
            horarioDelDia.forEach(hora => {
                const bloque = document.createElement("div");
                bloque.classList.add("bloqueHora");
                if (horasReservadas.includes(hora)) {
                    bloque.classList.add("horaOcupada");
                    bloque.textContent = `‚õî ${hora}`;
                } else {
                    bloque.classList.add("horaLibre");
                    bloque.textContent = `‚úÖ ${hora}`;
                    bloque.onclick = () => {
                        document.getElementById("hora").value = hora;
                        fechaInput.value = fecha;
                        document.getElementById("modal-hora-personalizada").style.display = "block";
                        ventanaHorarios.style.display = "none";
                    };
                }
                horariosDisponibles.appendChild(bloque);
            });
            ventanaHorarios.style.display = "block";
        }
        cerrarVentana.onclick = () => { ventanaHorarios.style.display = "none"; };
        window.onclick = (e) => { if (e.target === ventanaHorarios) ventanaHorarios.style.display = "none"; };

        function enviarMensajeWhatsApp() {
            const nombre = document.getElementById("nombre")?.value.trim();
            const apellido = document.getElementById("apellido")?.value.trim();
            const fecha = fechaInput.value;
            const hora = document.getElementById("hora").value;
            if (!nombre || !fecha || !hora) {
                alert("Faltan datos: aseg√∫rate de ingresar nombre, fecha y hora");
                return;
            }
            const numeroDestino = "56930273353";
            const nombreCompleto = apellido ? `${nombre} ${apellido}` : nombre;
            const mensaje = `Hola, soy ${nombreCompleto}. Quiero reservar para el d√≠a ${fecha} a las ${hora}.`;
            const url = `https://wa.me/${numeroDestino}?text=${encodeURIComponent(mensaje)}`;
            window.open(url, "_blank");
        }
        function reservarHora() {
            const nombre = document.getElementById("nombre")?.value.trim();
            const apellido = document.getElementById("apellido")?.value.trim();
            const fecha = fechaInput.value;
            const hora = document.getElementById("hora").value;
            if (!fecha || !hora || !nombre) {
                alert("Completa todos los campos: nombre, fecha y hora");
                return;
            }
            const idBloque = `${fecha}-${hora}`;
            const ref = reservasRef;
            ref.once("value", snapshot => {
                let ocupada = false;
                snapshot.forEach(child => {
                    const r = child.val();
                    if (`${r.fecha}-${r.hora}` === idBloque) ocupada = true;
                });
                if (ocupada) {
                    alert("La hora seleccionada ya est√° ocupada");
                } else {
                    ref.push({ fecha, hora, nombre, apellido }).then(() => {
                        document.getElementById("modal-reservada").style.display = "block";
                        enviarMensajeWhatsApp();
                        setTimeout(() => {
                            document.getElementById("modal-reservada").style.display = "none";
                            document.getElementById("modal-hora-personalizada").style.display = "none";
                        }, 1500);
                    });
                }
            });
        }
        document.getElementById("reservar-button").onclick = reservarHora;
        function abrirCalendarioModal() { document.getElementById('modal-calendario').classList.add('activa'); actualizarBarraMes(); }
        function cerrarCalendarioModal() { document.getElementById('modal-calendario').classList.remove('activa'); }
        document.getElementById('btn-whatsapp').onclick = function(e){ e.preventDefault(); abrirCalendarioModal(); };
        const heroBtn = document.getElementById('btn-agendar-hero'); if (heroBtn) heroBtn.onclick = function(e){ e.preventDefault(); abrirCalendarioModal(); };
        const contactoBtn = document.getElementById('btn-agendar-contacto'); if (contactoBtn) contactoBtn.onclick = function(e){ e.preventDefault(); abrirCalendarioModal(); };
        document.getElementById('cerrar-modal-calendario').onclick = cerrarCalendarioModal;
        document.getElementById('cambiar-hora-btn').onclick = function(e){
            e.preventDefault();
            const f = document.getElementById('fecha').value;
            if (f) abrirVentanaHorarios(f);
            else abrirCalendarioModal();
        };
        btnPanel.onclick = function(e){ e.preventDefault(); modalAcceso.style.display = "block"; };
        document.getElementById('cerrar-modal-acceso').onclick = function(){ modalAcceso.style.display = "none"; };
        document.getElementById('cerrar-modal-control').onclick = function(){ modalControl.style.display = "none"; modoBloqueoDias = false; modoGestionHorarios = false; };
        document.getElementById('cerrar-modal-config').onclick = function(){ modalConfigHorarios.style.display = "none"; modoGestionHorarios = false; };
        document.getElementById('btn-entrar').onclick = function(){
            const claveInputVal = document.getElementById("clave-input").value;
            if (claveInputVal === "1234") {
                modalAcceso.style.display = "none";
                modalControl.style.display = "block";
                document.getElementById("clave-input").value = "";
            } else {
                alert("Clave incorrecta");
            }
        };
        document.getElementById('activar-bloqueo').onclick = function(){ 
            modoBloqueoDias = true; 
            modoGestionHorarios = false; 
            modalControl.style.display = "none"; 
            document.getElementById('desactivar-bloqueo').style.display = "block"; // Mostrar bot√≥n
            actualizarBarraMes(); 
        };
        document.getElementById('desactivar-bloqueo').onclick = function(){ 
            modoBloqueoDias = false; 
            document.getElementById('desactivar-bloqueo').style.display = "none"; // Ocultar bot√≥n
            actualizarBarraMes(); 
        };
        document.getElementById('activar-horarios').onclick = function(){  modoGestionHorarios = true; modoBloqueoDias = false; modalControl.style.display = "none"; };
        document.getElementById('borrar-todas').onclick = function(){
            if (confirm('¬øBorrar todas las reservas?')) {
                reservasRef.remove().then(() => {
                    modalControl.style.display = "none";
                    modoBloqueoDias = false;
                    modoGestionHorarios = false;
                    actualizarBarraMes();
                }).catch(error => { alert("Error al borrar las reservas: " + error.message); });
            }
        };
        document.getElementById('cerrar-panel').onclick = function(){ modalControl.style.display = "none"; modoBloqueoDias = false; modoGestionHorarios = false; };
        function abrirVentanaConfiguracionHorarios() {
            tituloConfigHorarios.textContent = "Configurar Horario " + fechaSeleccionadaParaConfigurar;
            fechaConfigHorarios.textContent = "";
            document.getElementById("boton-horario-semana").onclick = () => { cargarHorasEnModal(obtenerHorarioSemanaBase()); };
            document.getElementById("boton-horario-sabado").onclick = () => { cargarHorasEnModal(obtenerHorarioSabadoBase()); };
            document.getElementById("boton-horario-cerrado").onclick = () => { cargarHorasEnModal([]); };
            const horarioActual = horariosPersonalizados[fechaSeleccionadaParaConfigurar] || [];
            cargarHorasEnModal(horarioActual);
            modalConfigHorarios.style.display = "block";
        }
        function obtenerHorarioSemanaBase() {
            const horas = [];
            for (let h = 9; h <= 18; h++) horas.push(String(h).padStart(2,"0")+":00");
            return horas;
        }
        function obtenerHorarioSabadoBase() {
            const horas = [];
            for (let h = 9; h <= 14; h++) horas.push(String(h).padStart(2,"0")+":00");
            return horas;
        }
        function cargarHorasEnModal(horasActivas) {
            botonesToggleHoras.innerHTML = "";
            const base = Array.from(new Set([...obtenerHorarioSemanaBase(), ...obtenerHorarioSabadoBase()]));
            base.forEach(hora => {
                const boton = document.createElement("button");
                boton.textContent = hora;
                boton.classList.add("toggle-hora");
                if (horasActivas.includes(hora)) boton.classList.add("activo");
                boton.onclick = () => { boton.classList.toggle("activo"); };
                botonesToggleHoras.appendChild(boton);
            });
        }
        document.getElementById("guardar-horario").onclick = function() {
            const horasSeleccionadas = [];
            botonesToggleHoras.querySelectorAll(".activo").forEach(b => { horasSeleccionadas.push(b.textContent); });
            if (horasSeleccionadas.length > 0) {
                horariosRef.child(fechaSeleccionadaParaConfigurar).set(horasSeleccionadas).then(() => {
                    modalConfigHorarios.style.display = "none";
                    modoGestionHorarios = false;
                    actualizarBarraMes();
                }).catch(error => { alert("Error al guardar el horario: " + error.message); });
            } else {
                horariosRef.child(fechaSeleccionadaParaConfigurar).remove().then(() => {
                    modalConfigHorarios.style.display = "none";
                    modoGestionHorarios = false;
                    actualizarBarraMes();
                }).catch(error => { alert("Error al borrar el horario: " + error.message); });
            }
        };


    </script>
    
</body>
</html>
